# Распределенные БД

#### Додонов Михаил Витальевич

1 курс 2 полугодие (2 семестр)

### Варианты

Предметная область: Книжный сайт. 

Основные предметно-значимые сущности: Серии книг, Авторы, Книги, Главы. 

Основные предметно-значимые атрибуты сущностей: 
−	серии книг – название серии книг; 
−	авторы – ФИО автора; 
−	книги – название книги, описание книги, ключевые слова; 
−	главы – название главы, время чтения, количество страниц. 

Основные требования к функциям системы: 
−	выбрать все книги по определённому автору;
−	выбрать все главы определённой книги;
−	вывести рейтинг книг по времени чтения;
−	вывести все книги определённой серии;
−	вывести все книги по определённому ключевому слову;
−	подсчитать количество страниц нужной книги;
−	подсчитать количество страниц нужной серии;
−	подсчитать время чтения нужной книги;
−	подсчитать время чтения выбранной серии

# Лабораторные работы

> Если в папке лабораторной работы нет файлов программы или появляются ошибки при запуске, вы всегда можете найти код в конце отчёта.

## Лабораторная работа 1

Создание ER-модели данных. 

**Задание**

1.	Изучите теоретические основы построения ER-модели данных, рассмотренные в лекционном курсе, методических указаниях или других источниках. 
2.	Ответьте на вопросы к лабораторной работе. 
3.	Подготовьте отчет к оформлению хода выполнения работы. 
Порядок выполнения работы: 
4.	Выберите логический уровень представления модели данных. 
5.	Выделите необходимые сущности согласно предметной области своего варианта. 
6.	Определите необходимые атрибуты сущностей. 
7.	Укажите домены для всех атрибутов сущностей. 
8.	Задайте необходимые ограничения целостности данных. 
9.	Укажите альтернативные и первичные ключи сущностей. 
10.	Задайте необходимые связи между сущностями. 
11.	Укажите необходимые свойства связей. 
12.	Приведите созданную модель к третьей нормальной форме. 
13.	Оформите отчет о выполнении лабораторной работы. 

## Лабораторная работа 2

Создание таблиц и ограничений целостности. Использование команд SQL для работы с данными, хранящимися в таблицах.

**Задание**

1.	Изучите теоретические основы построения ER-модели данных, команды создания таблиц, связей и запросов в СУБД, рассмотренные в лекционном курсе, методических указаниях или других источниках.
2.	Ответьте на вопросы к лабораторной работе. 
3.	Подготовьте отчет к оформлению хода выполнения работы. 
Порядок выполнения работы: 
1.	Укажите физический уровень представления в ER-модели данных, созданной на лабораторной работе № 1.
2.	Выберите необходимую СУБД, для которой нужно создать схему данных.
3.	Внесите необходимые изменения в имена таблиц, полей, связей и их свойства.
4.	Проверьте и внесите необходимые изменения в типы данных полей.
5.	Проверьте и внесите необходимые изменения в ограничения целостности данных.
6.	Сгенерируйте DDL-скрипт для создания схемы данных в выбранной СУБД.
7.	Внесите необходимые изменения в созданный DDL-скрипт.
8.	Выполните DDL-скрипт и заполните созданные таблицы данными командой SQL Insert (минимум 10 записей на таблицу).
9.	Создайте необходимые SQL запросы, выполняющие основные требования к функциям системы.
10.	Обдумайте и создайте запросы, которые, возможно, будут полезными для будущих пользователей Вашей базы данных.
11.	Приведите примеры запросов с выборкой, сортировкой, группировкой, левым, правым и внешним объединением.
12.	Оформите отчет о выполнении лабораторной работы.

## Лабораторная работа 3

Создание представлений. Использование команд SQL для работы с данными, которые доступны через представления. 

**Задание**

1. Изучите теоретические основы, команды создания представлений, рассмотренные в лекционном курсе, методических указаниях или других источниках.
2. Ответьте на вопросы к лабораторной работе.
3. Подготовьте отчет к оформлению хода выполнения работы.
Порядок выполнения работы:
1. Создайте представления на основе запросов из лабораторной работы No 1.
2. Проверьте работоспособность созданных представлений командой SQL Select.
3. Создайте обновляемые представления для всех таблиц.
4. Проверьте работоспособность созданных представлений командами SQL: Select,
Insert, Update и Delete.
5. Добавьте в таблицы поля NameUser, в которых будет храниться имя пользователя, создавшего запись.
6. Создайте представления с детальным контролем доступа (where NameUser=USER).
7. Приведите примеры представлений с выборкой, сортировкой, группировкой, левым,
правым и внешним объединением.
8. Оформите отчет о выполнении лабораторной работы. 

## Лабораторная работа 4

Создание и использование триггеров.

**Задание**

1. Изучите теоретические основы, команды создания последовательностей и триггеров,
рассмотренные в лекционном курсе, методических указаниях или других источниках.
2. Создайте необходимые последовательности для суррогатных первичных ключей (Oracle).
3. Создайте триггеры вставки и изменения записей таблиц, определяющие значение суррогатного первичного ключа по умолчанию.
4. Создайте триггер удаления записей из таблиц, удаляющие связанные записи из дочерних таблиц.
5. Внесите такие изменения в триггеры вставки и изменения записей таблиц, которые не позволят добавить или изменить записи с дублирующими названиями.
6. Создайте триггеры для необновляемых представлений, позволяющие изменять данные.
7. Ответьте на вопросы к лабораторной работе.
8. Подготовьте отчет к оформлению хода выполнения работы.

## Лабораторная работа 5

Создание и использование хранимых процедур.

**Задание**

1. Изучите теоретические основы, команды создания хранимых процедур, функций и пакетов, рассмотренные в лекционном курсе, методических указаниях или других источниках.
2. Ответьте на вопросы к лабораторной работе.
3. Создайте хранимые процедуры для добавления и изменения записей в таблицах, проверяющих существование редактируемой записи и определяющих значение суррогатного первичного ключа по умолчанию для новых записей.
2. Внесите такие изменения в хранимые процедуры добавления и изменения записей в таблицах, которые не позволят добавить или изменить записи с дублирующими названиями. 
3. Создайте хранимые процедуры удаления записей из таблиц, удаляющих связанные записи из дочерних таблиц.
4. Внесите такие изменения в хранимые процедуры удаления, добавления и изменения записей в таблицах, которые позволят выполнить операции только для заданных пользователей.
5. Проверьте работоспособность всех созданных хранимых процедур.
6. Оформите все созданные хранимые процедуры для каждой таблицы в виде пакетов.
7. Проверьте работоспособность пакетов.
8. Подготовьте отчет к оформлению хода выполнения работы.

## Лабораторная работа 6

Разработка системы защиты информации на основе привилегий.

**Задание**

1. Изучите теоретические основы защиты информации на основе привилегий, команды выдачи и отмены привилегий, рассмотренные в лекционном курсе, методических указаниях или других источниках.
2. Ответьте на вопросы к лабораторной работе.
3. 1. Создайте нового пользователя и предоставьте ему привилегии на выборку информации из созданных Вами представлений и запуск созданных пакетов.
2. Соединитесь с СУБД от имени нового пользователя и проверьте возможность доступа к Вашим данным через представления и запуска процедур из пакетов.
3. Проверьте невозможность доступа к Вашим данным через таблицы и хранимые процедуры
4. Соединитесь с СУБД от своего имени и предоставьте новому пользователю привилегии на выборку, вставку, изменение и удаление данных из Ваших таблиц.
5. Соединитесь с СУБД от имени нового пользователя и проверьте возможность изменения данных в созданных Вами таблицах.
6. Соединитесь с СУБД от своего имени и отберите у нового пользователя все предоставленные ему привилегии.
7. Соединитесь с СУБД от имени нового пользователя и проверьте невозможность изменения данных в созданных Вами таблицах и запуск ваших хранимых процедур и пакетов. 
8. Оформите отчет о выполнении лабораторной работы.
